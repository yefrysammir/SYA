<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Lock Numérico</title>

<!-- status bar iOS/Android -->
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@300" rel="stylesheet"/>

<style>
:root {
  --primary: #ffa0e5;
  --text: #ffffff;
}

/* --- Global --- */
*{margin:0;padding:0;box-sizing:border-box;-webkit-user-select:none;user-select:none;}
html,body{
  width:100%;height:100dvh;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  color:var(--text);
  overflow:hidden;
  background:#000;
}

/* --- Fondo estilo TikTok (imagen full con overlay oscuro) --- */
#lockScreen{
  position:fixed;inset:0;
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  background:url("momentos/foto2.JPG") no-repeat center/cover;
}
#lockScreen::after{
  content:"";
  position:absolute;inset:0;
  background:rgba(0,0,0,0.35); /* oscurece imagen */
  pointer-events:none;
}

/* --- Contenido sobre el fondo --- */
.lockContent{
  position:relative;
  display:flex;flex-direction:column;
  align-items:center;
  z-index:1;
  width:100%;
  padding-top:env(safe-area-inset-top); /* statusbar iOS */
  padding-bottom:env(safe-area-inset-bottom);
}

/* --- Corazón animado --- */
.heart{
  font-size:3rem;
  margin-bottom:1rem;
  animation:heartbeat 1.8s infinite;
}
@keyframes heartbeat{0%,100%{transform:scale(1);}50%{transform:scale(1.2);}}

/* --- Indicador PIN --- */
#pinDots{
  display:flex;gap:.5rem;margin-bottom:1rem;
}
.dot{
  width:.9rem;height:.9rem;border-radius:50%;
  border:2px solid var(--text);
  background:transparent;
  transition:.2s;
}
.dot.filled{background:var(--text);}

/* --- Keypad --- */
#keypad{
  display:grid;
  grid-template-columns:repeat(3,70px);
  gap:1rem;
  justify-content:center;
}
.key{
  width:70px;height:70px;
  border-radius:50%;
  background:rgba(0,0,0,0.4);
  color:var(--text);
  display:flex;align-items:center;justify-content:center;
  font-size:2rem;
  cursor:pointer;
  backdrop-filter:blur(6px);
  transition:.2s;
}
.key:active{transform:scale(0.9);}
.material-symbols-outlined{font-size:2rem;}
</style>
</head>
<body oncontextmenu="return false;">

<div id="lockScreen">
  <div class="lockContent">
    <span class="material-symbols-outlined heart">favorite</span>
    <div id="pinDots"></div>
    <div id="keypad"></div>
    <div id="errorText" style="margin-top:1rem;color:#ff8585;display:none;">Código incorrecto</div>
  </div>
</div>

<script>
// --- Configuración ---
const PASSWORD_HASH = "coloca_aqui_tu_hash_SHA256"; // tu hash
const PIN_LENGTH = 4;

// --- Helpers ---
async function hashPassword(pwd){
  const enc=new TextEncoder().encode(pwd);
  const buf=await crypto.subtle.digest("SHA-256",enc);
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,"0")).join("");
}

// --- Dots ---
const dots=document.getElementById("pinDots");
for(let i=0;i<PIN_LENGTH;i++){
  const d=document.createElement("div");
  d.className="dot";
  dots.appendChild(d);
}
const dotEls=[...document.querySelectorAll(".dot")];

// --- Keypad ---
const keypad=document.getElementById("keypad");
function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}
function renderKeypad(){
  keypad.innerHTML="";
  let nums=shuffle([...Array(10).keys()]);
  nums.forEach(n=>{
    const k=document.createElement("div");
    k.className="key";
    k.textContent=n;
    k.onclick=()=>enterDigit(n);
    keypad.appendChild(k);
  });
  // borrar
  const del=document.createElement("div");
  del.className="key material-symbols-outlined";
  del.textContent="backspace";
  del.onclick=deleteDigit;
  keypad.appendChild(del);
  // enter
  const ok=document.createElement("div");
  ok.className="key material-symbols-outlined";
  ok.textContent="check_circle";
  ok.onclick=checkPassword;
  keypad.appendChild(ok);
}
renderKeypad();

// --- Lógica ---
let input="";
function enterDigit(n){
  if(input.length>=PIN_LENGTH)return;
  input+=n;
  dotEls[input.length-1].classList.add("filled");
}
function deleteDigit(){
  if(input.length>0){
    dotEls[input.length-1].classList.remove("filled");
    input=input.slice(0,-1);
  }
}
async function checkPassword(){
  if(input.length!==PIN_LENGTH)return;
  const hash=await hashPassword(input);
  if(hash===PASSWORD_HASH){
    document.getElementById("errorText").style.display="none";
    alert("✔ Desbloqueado!");
  }else{
    document.getElementById("errorText").style.display="block";
    input="";
    dotEls.forEach(d=>d.classList.remove("filled"));
    renderKeypad();
  }
}
</script>
</body>
</html>